<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Recuperar contraseña - Congresos o eventos</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css">
  <style>
    html,body{height:100%;}
    body{display:flex; align-items:stretch;}
    .left-side{flex:0 0 40%; background:#fff; display:flex; align-items:center; justify-content:center;}
    .right-side{flex:0 0 60%; background:#26343a; color:#fff; display:flex; align-items:center; justify-content:center;}
    .card-wrap{ width:420px; }
    .card-wrap h2{ color:#fff; font-weight:700; }
    .form-control{ border-radius:8px; }
  .btn-primary{ background:#0d6efd; border-color:#0d6efd; transition:box-shadow .2s, background-color .2s, border-color .2s, transform .2s; }
  .btn-primary:hover{ background:#1677ff; border-color:#1677ff; box-shadow:0 0 12px rgba(13,110,253,.6); transform:translateY(-1px); }
  .btn-light{ transition:box-shadow .2s, transform .2s; }
  .btn-light:hover{ box-shadow:0 0 12px rgba(13,110,253,.45); transform:translateY(-1px); }
  .tabs { display:flex; gap:24px; margin-bottom:18px; }
  .tabs a{ color:rgba(255,255,255,0.7); text-decoration:none; padding-bottom:6px; border-bottom:2px solid transparent; transition:color .2s, text-shadow .2s, border-color .2s; }
  .tabs a:hover{ color:#fff; text-shadow:0 0 10px rgba(255,255,255,.6); border-bottom-color:rgba(255,255,255,.45); }
    .tabs a.active{ color:#fff; border-bottom-color:rgba(255,255,255,0.2); }
    .small-muted{ color:rgba(255,255,255,0.6); }
    .logo-img{ max-width:360px; }
    @media (max-width:900px){ body{flex-direction:column;} .left-side,.right-side{width:100%;} .right-side{padding:40px 24px;} }
  </style>
</head>
<body>
  {% load static %}
  <div class="left-side">
    {% if selected_congreso and selected_congreso.logo %}
      <img src="{{ selected_congreso.logo.url }}" alt="{{ selected_congreso.name }}" class="logo-img">
    {% else %}
      <img src="{% static 'base/img/SAEC.png' %}?v=2" alt="SAEC" class="logo-img">
    {% endif %}
  </div>
  <div class="right-side">
    <div class="card-wrap">
      <h2>Sistema de Administración de Congresos o eventos</h2>

      <div class="tabs mt-4">
        <a href="{% url 'login' %}{% if selected_congreso %}?c={{ selected_congreso.id }}{% endif %}">Login</a>
        <a class="active" href="{% url 'password_reset' %}{% if selected_congreso %}?c={{ selected_congreso.id }}{% endif %}">Olvidé contraseña</a>
      </div>

      {% if messages %}
        {% for m in messages %}
          <div class="alert {% if 'error' in m.tags %}alert-danger{% else %}alert-{{ m.tags }}{% endif %}">{{ m }}</div>
        {% endfor %}
      {% endif %}

      {% if email_sent %}
        <div class="mt-4">
          <h4>Verifica tu correo para</h4>
          <h4>restablecer tu contraseña</h4>
          <p class="small-muted mt-2">El código que recibirás caduca en 30 minutos.</p>
          {% if using_console_backend %}
            <p class="small-muted mt-3">Modo desarrollo: el mensaje se imprimió en la consola donde ejecutaste el servidor (no se envió un correo real). Configura SMTP para envío real.</p>
          {% endif %}
        </div>
      {% else %}
        <h4 class="mt-3">Restablece tu contraseña</h4>
        <form method="post" action="">
          {% csrf_token %}
          {% if selected_congreso %}
            <input type="hidden" name="c" value="{{ selected_congreso.id }}" />
          {% endif %}
          <div class="mb-3">
            <input name="email" type="email" class="form-control" placeholder="Correo" required>
          </div>
          <div class="mb-3">
            <button type="submit" class="btn btn-primary w-100" style="border-radius:8px;">Enviar Solicitud</button>
          </div>
        </form>
      {% endif %}


    </div>
  </div>
</body>
</html>
