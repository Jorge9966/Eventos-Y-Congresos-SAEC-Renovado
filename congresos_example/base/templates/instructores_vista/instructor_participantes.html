<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8">
  <title>Participantes - Instructor</title>
  {% load static extra_filters %}
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet">
  {% include '_congreso_base_styles.html' %}
  <style>
    /* Estilo alineado a talleres_list: proporciones, hover y estructura */
    .sel-grid{ display:grid; grid-template-columns: repeat(auto-fill, minmax(300px,1fr)); gap:26px; }
    .sel-card{ background:#fff; border:1px solid #e6ebf2; border-radius:12px; box-shadow:0 10px 24px rgba(15,23,42,0.06); padding:16px; height:100%; transition:transform .2s ease, box-shadow .2s ease; }
    .sel-card:hover{ transform:translateY(-4px); box-shadow:0 16px 36px rgba(15,23,42,0.12); }
    .sel-media{ width:100%; height:200px; object-fit:contain; background:#fff; border-radius:10px; display:block; overflow:hidden; }
    .sel-title{ font-weight:800; font-size:1.4rem; color:#0b1730; line-height:1.25; margin:12px 0; transition:color .2s ease; }
    .sel-card:hover .sel-title{ color:#f97316; }
    .sel-meta{ color:#475569; font-size:1rem; }
    .desc-line{ margin-top:8px; color:#0b1730; font-size:.9rem; line-height:1.25; white-space:normal; display:inline-block; background:transparent; border:none; border-radius:8px; padding:0; box-shadow:none; font-weight:600; }
    .work-divider{ height:1px; background:#eef2f7; margin:12px 0; }
    .stat{ color:#64748b; font-size:.9rem; display:flex; align-items:center; gap:6px; }
    .status-badge{ background:#22c55e; color:#fff; border-radius:24px; padding:4px 12px; font-weight:600; font-size:.85rem; }
    .icon-actions .btn{ display:inline-flex; align-items:center; justify-content:center; width:44px; height:40px; padding:0; }
  </style>
</head>
<body>
  {% include 'partials/instructor_sidebar.html' %}
  <div class="main" style="padding:0 40px 40px 40px;">
    {% include 'partials/instructor_topbar.html' %}
    <section class="hero-banner" style="margin-left:-40px; margin-right:-40px; width:calc(100% + 80px);">
      <div class="container-fluid px-0">
        <div class="d-flex align-items-center gap-3">
          <img src="{% static 'base/img/participante_admin.png' %}" alt="Participantes" style="width:80px;height:80px;object-fit:contain;border-radius:50%;background:#ffffff;">
          <h1 class="page-title m-0" style="font-size:2.2rem;">Participantes</h1>
        </div>
        <p class="text-white" style="max-width:620px; font-size:1rem; opacity:.92;">Selecciona una opción para ver la lista de los alumnos inscritos</p>
      </div>
    </section>
    <div class="container-fluid px-0 py-4">
      {% if recurso_rows %}
        <div class="sel-grid">
          {% for r in recurso_rows %}
            <div class="sel-card">
              {% if r.obj.image %}
                <img class="sel-media" src="{{ r.obj.image.url }}" alt="{{ r.titulo }}" />
              {% endif %}
              <h2 class="sel-title">{{ r.titulo }}</h2>
              <div class="sel-meta">
                <div><strong>{% if r.tipo == 'taller' %}Taller{% elif r.tipo == 'concurso' %}Concurso{% else %}Conferencia{% endif %}</strong></div>
                {% if r.obj.lugar %}<div><strong>Lugar:</strong> {{ r.obj.lugar }}</div>{% endif %}
                {% if r.obj.description %}
                  <div class="desc-line">{{ r.obj.description|first_line }}</div>
                {% endif %}
              </div>
              <div class="work-divider"></div>
              <div class="d-flex align-items-center justify-content-between flex-wrap gap-2">
                <div class="stat"><i class="bi bi-people"></i>
                  {% if r.tipo == 'taller' %}
                    {{ r.inscritos }} inscritos de {{ r.obj.cupo_maximo|default:35 }}
                  {% elif r.tipo == 'conferencia' %}
                    {{ r.inscritos }} inscritos de {{ r.obj.cupo_maximo|default:35 }}
                  {% elif r.tipo == 'concurso' and r.obj.type == 'individual' %}
                    {{ r.inscritos }} inscritos de {{ r.obj.cupo_maximo|default:35 }}
                  {% elif r.tipo == 'concurso' and r.obj.type == 'grupal' %}
                    {{ r.equipos_inscritos|default:0 }}{% if r.obj.numero_equipos %} de {{ r.obj.numero_equipos }}{% endif %} equipos
                    {% if r.obj.max_por_equipo %}
                      <span style="color:#94a3b8; font-size:.85em;"> · Máx integrantes/equipo: {{ r.obj.max_por_equipo }}</span>
                    {% endif %}
                  {% else %}
                    {{ r.inscritos }} inscritos
                  {% endif %}
                </div>
                {% if r.tipo == 'concurso' and r.obj.type == 'grupal' %}
                  {% if r.obj.numero_equipos and r.equipos_inscritos >= r.obj.numero_equipos %}
                    <span class="status-badge" style="background:#ef4444;">No Disponible</span>
                  {% else %}
                    <span class="status-badge">Disponible</span>
                  {% endif %}
                {% else %}
                  {% if r.obj.cupo_maximo and r.inscritos >= r.obj.cupo_maximo %}
                    <span class="status-badge" style="background:#ef4444;">No Disponible</span>
                  {% else %}
                    <span class="status-badge">Disponible</span>
                  {% endif %}
                {% endif %}
              </div>
              <div class="mt-3 d-flex gap-2 icon-actions">
                <a href="{{ r.url }}" class="btn btn-primary" title="Ver participantes" aria-label="Ver participantes">
                  <i class="bi bi-people"></i>
                </a>
              </div>
            </div>
          {% endfor %}
        </div>
      {% else %}
        <div class="empty" style="background:#fff; border:1px solid #e6ebf2; border-radius:12px; padding:40px; text-align:center; box-shadow:0 6px 18px rgba(15,23,42,0.05);">
          <h3 style="margin:0 0 12px; font-weight:600; color:#0b1730;">Sin recursos</h3>
          <p style="margin:0; color:#64748b;">Aún no tienes talleres, concursos o conferencias creados en este congreso.</p>
        </div>
      {% endif %}
    </div>
    {% include 'partials/footer.html' %}
  </div>
</body>
</html>